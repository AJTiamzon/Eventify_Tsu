{% extends "base.html" %} {% block head %}
<style>
  .event-header {
    background-blend-mode: darken;
    background-color: rgba(0, 0, 0, 0.5);
    color: #ffd700; /* Gold text */
    font-size: 2.5rem;
    text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
  }

  .bg-light {
    background-color: #f9f9f9 !important;
  }

  .text-primary {
    color: #007bff !important; /* Bootstrap Primary Blue */
  }

  @media (max-width: 768px) {
    #event_image {
      max-width: 100%;
      max-height: 100%; /* Adjust the max-height to fit your design */
      object-fit: cover;
    }
  }
</style>
{% endblock %} {% block title %}Editing Created Events{% endblock %} {% block
content %}
<nav id="sidebar" class="sidebar js-sidebar">
  <div class="sidebar-content js-simplebar">
    <a class="sidebar-brand" href="/create_event_home">
      <span class="align-middle">Creator Dashboard</span>
    </a>

    <ul class="sidebar-nav">
      <li class="sidebar-header">
        <a class="sidebar-link" href="/create_event_home">
          <i class="align-middle"
            ><img
              src="{{ url_for('static', filename='img/icons/icon-48x48.png') }}"
              alt=""
              style="max-width: 15%; max-height: 15%; object-fit: cover"
          /></i>
          <span class="align-middle" style="color: white">Creator Home</span>
        </a>
      </li>

      <li class="sidebar-item">
        <a class="sidebar-link" href="/create_event_profile">
          <i class="align-middle"
            ><img
              src="{{ url_for('static', filename='img/icons/user.png') }}"
              alt=""
              style="max-width: 15%; max-height: 15%; object-fit: cover"
          /></i>
          <span class="align-middle" style="color: white">View Profile</span>
        </a>
      </li>

      <li class="sidebar-item">
        <a class="sidebar-link" href="/create-event">
          <i class="align-middle"
            ><img
              src="{{ url_for('static', filename='img/icons/add-event.png') }}"
              alt=""
              style="max-width: 15%; max-height: 15%; object-fit: cover"
          /></i>
          <span class="align-middle" style="color: white">Create Event</span>
        </a>
      </li>

      <li class="sidebar-item">
        <a class="sidebar-link" href="/created_event_edit">
          <i class="align-middle"
            ><img
              src="{{ url_for('static', filename='img/icons/view.png') }}"
              alt=""
              style="max-width: 15%; max-height: 15%; object-fit: cover"
          /></i>
          <span class="align-middle" style="color: white"
            >View Your Events</span
          >
        </a>
      </li>

      <li class="sidebar-item">
        <a class="sidebar-link" href="/create_event_history">
          <i class="align-middle"
            ><img
              src="{{ url_for('static', filename='img/icons/calendar_final.png') }}"
              alt=""
              style="max-width: 15%; max-height: 15%; object-fit: cover"
          /></i>
          <span class="align-middle" style="color: white"
            >Finalized Events</span
          >
        </a>
      </li>

      <li class="sidebar-item">
        <a class="sidebar-link" href="/event_attendee_list">
          <i class="align-middle"
            ><img
              src="{{ url_for('static', filename='img/icons/audience.png') }}"
              alt=""
              style="max-width: 15%; max-height: 15%; object-fit: cover"
          /></i>
          <span class="align-middle" style="color: white">Attendee List</span>
        </a>
      </li>

      <li class="sidebar-item">
        <a class="sidebar-link" href="/calendar">
          <i class="align-middle"
            ><img
              src="{{ url_for('static', filename='img/icons/calendar.png') }}"
              alt=""
              style="max-width: 15%; max-height: 15%; object-fit: cover"
          /></i>
          <span class="align-middle" style="color: white">View Calendar</span>
        </a>
      </li>

      <li class="sidebar-item">
        <a class="sidebar-link" href="/rating_and_feedback">
          <i class="align-middle"
            ><img
              src="{{ url_for('static', filename='img/icons/rate.png') }}"
              alt=""
              style="max-width: 15%; max-height: 15%; object-fit: cover"
          /></i>
          <span class="align-middle" style="color: white">Rate Suppliers</span>
        </a>
      </li>

      <li class="sidebar-item">
        <a class="sidebar-link" href="/join_room">
          <i class="align-middle"
            ><img
              src="{{ url_for('static', filename='img/icons/chat.png') }}"
              alt=""
              style="max-width: 15%; max-height: 15%; object-fit: cover"
          /></i>
          <span class="align-middle" style="color: white">Chat Room</span>
        </a>
      </li>

      <li class="sidebar-item">
        <a class="sidebar-link" href="/video_chat_dashboard" target="_blank">
          <i class="align-middle"
            ><img
              src="{{ url_for('static', filename='img/icons/videoconference.png') }}"
              alt=""
              style="max-width: 15%; max-height: 15%; object-fit: cover"
          /></i>
          <span class="align-middle" style="color: white">Video Chat Room</span>
        </a>
      </li>
    </ul>
  </div>
</nav>

<div class="main">
  <nav class="navbar navbar-expand navbar-light navbar-bg">
    <a class="sidebar-toggle js-sidebar-toggle">
      <i class="hamburger align-self-center"></i>
    </a>

    <div class="navbar-collapse collapse">
      <ul class="navbar-nav navbar-align">
        <li class="nav-item dropdown">
          <a
            class="nav-icon dropdown-toggle d-inline-block d-sm-none"
            href="#"
            data-bs-toggle="dropdown"
          >
            <i class="align-middle" data-feather="settings"></i>
          </a>
          <a
            class="nav-link dropdown-toggle d-none d-sm-inline-block"
            href="#"
            data-bs-toggle="dropdown"
          >
            <img
              src="{{ url_for('static', filename='img/avatars/avatar.png') }}"
              class="avatar img-fluid rounded me-1"
              alt="User Avatar"
            />
            <span class="text-dark">{{ name }}</span>
          </a>
          <div class="dropdown-menu dropdown-menu-end">
            <a class="dropdown-item" href="#"
              ><i class="align-middle me-1" data-feather="user"></i> Profile</a
            >
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/logout">Log out</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>

  {% for event in events %}
  <main class="event-section mb-5 p-3 bg-light border rounded">
    <div class="container">
      <div class="card">
        <!-- Event Header -->
        <div class="card mb-4 shadow-sm">
          <!-- Event Title -->
          <div
            class="event-header p-5 text-center"
            style="
              background: linear-gradient(
                  180deg,
                  rgba(236, 221, 221, 0.6),
                  rgba(236, 221, 221, 0.6)
                ),
                {% if event.event_type == 'Birthday' %}
                url('https://static.vecteezy.com/system/resources/previews/023/460/354/non_2x/happy-birthday-background-with-balloons-illustration-ai-generative-free-photo.jpg');
                {% endif %}
                {% if event.event_type == 'Wedding' %}
                url('https://img.stablecog.com/insecure/1920w/aHR0cHM6Ly9iLnN0YWJsZWNvZy5jb20vYjg0MGYzMzEtMjAyNS00Y2RlLWJkNjUtNTI1MTljZTA2ZDU0LmpwZWc.webp');
                {% endif %}
                {% if event.event_type == 'Baptismal' %}
                url('https://wallpapers.com/images/hd/baptism-background-1920-x-1080-15m4uhh0igxyn7pz.jpg');
                {% endif %}
              background-size: cover;
              background-position: center;"
          >
            <h1 class="fw-bold text-uppercase" style="color: #ffd700">
              {{ event.event_name }}
            </h1>
          </div>

          <!-- Event Details Section -->
          <div class="row p-4">
            <div class="col-md-6">
              <div
                class="bg-light p-4 rounded shadow-sm"
                style="border: 1px solid #ddd"
              >
                <h3 class="text-primary mb-3 text-center">
                  <i class="align-middle">
                    <img
                      src="{{ url_for('static', filename='img/icons/icon-48x48.png') }}"
                      alt=""
                      style="max-width: 10%; max-height: 10%; object-fit: cover"
                    />
                  </i>
                  Event Overview
                </h3>
                <h5>
                  <i class="align-middle">
                    <img
                      src="{{ url_for('static', filename='img/icons/calendar.png') }}"
                      alt=""
                      style="max-width: 10%; max-height: 10%; object-fit: cover"
                    />
                  </i>
                  <strong>Start:</strong> {{ event.start_date }}
                </h5>
                <h5>
                  <i class="align-middle">
                    <img
                      src="{{ url_for('static', filename='img/icons/calendar_final.png') }}"
                      alt=""
                      style="max-width: 10%; max-height: 10%; object-fit: cover"
                    />
                  </i>
                  <strong>End:</strong> {{ event.end_date }}
                </h5>
                <h5>
                  <i class="align-middle">
                    <img
                      src="{{ url_for('static', filename='img/icons/audience.png') }}"
                      alt=""
                      style="max-width: 10%; max-height: 10%; object-fit: cover"
                    />
                  </i>
                  <strong>Max Attendees:</strong> {{ event.max_attendee_num }}
                </h5>
                <h5>
                  <i class="align-middle">
                    <img
                      src="{{ url_for('static', filename='img/icons/privacy.png') }}"
                      alt=""
                      style="max-width: 10%; max-height: 10%; object-fit: cover"
                    />
                  </i>
                  <strong>Privacy:</strong> {{ event.event_privacy }}
                </h5>
              </div>
            </div>
            <div class="col-md-6">
              <div
                class="bg-light p-4 rounded shadow-sm"
                style="border: 1px solid #ddd"
              >
                <h3 class="text-primary mb-3 text-center">
                  <i class="align-middle">
                    <img
                      src="{{ url_for('static', filename='img/icons/icon-48x48.png') }}"
                      alt=""
                      style="max-width: 10%; max-height: 10%; object-fit: cover"
                    />
                  </i>
                  Event Details
                </h3>
                <h5>
                  <i class="align-middle">
                    <img
                      src="{{ url_for('static', filename='img/icons/poppers.png') }}"
                      alt=""
                      style="max-width: 10%; max-height: 10%; object-fit: cover"
                    />
                  </i>
                  <strong>Type:</strong> {{ event.event_type }}
                </h5>
                <h5>
                  <i class="align-middle">
                    <img
                      src="{{ url_for('static', filename='img/icons/chat.png') }}"
                      alt=""
                      style="max-width: 10%; max-height: 10%; object-fit: cover"
                    />
                  </i>
                  <strong>Chat Room Code:</strong> {{ event.room_code }}
                </h5>
                <h5>
                  <i class="align-middle">
                    <img
                      src="{{ url_for('static', filename='img/icons/money.png') }}"
                      alt=""
                      style="max-width: 10%; max-height: 10%; object-fit: cover"
                    />
                  </i>
                  <strong>Total Cost:</strong> ₱{{ event.total_price }}
                </h5>
                <h5>
                  <i class="align-middle">
                    <img
                      src="{{ url_for('static', filename='img/icons/description.png') }}"
                      alt=""
                      style="max-width: 10%; max-height: 10%; object-fit: cover"
                    />
                  </i>
                  <strong>Description:</strong> {{ event.event_desc }}
                </h5>
              </div>
            </div>
          </div>
        </div>

        <!-- Event Image -->
        {% if event.image_path %}
        <div class="row my-4">
          <div class="col text-center">
            <img
              src="{{ url_for('static', filename='uploads/' + event.image_path) }}"
              alt="Event Image"
              class="img-fluid rounded shadow-sm"
              style="max-height: 300px; object-fit: cover"
            />
          </div>
        </div>
        {% endif %}

        <!-- Action Buttons -->
        <div class="row my-3">
          <div class="col text-center">
            <form
              action="{{ url_for('views_creator.create_event_edit_info', event_id=event.id) }}"
              method="GET"
              class="d-inline"
            >
              <button type="submit" class="btn btn-warning me-2">
                Edit Event
              </button>
            </form>
            <form
              action="{{ url_for('views_creator.create_record', event_id=event.id) }}"
              method="POST"
              class="d-inline"
            >
              <input
                type="hidden"
                name="total_price"
                value="{{ event.total_price }}"
              />
              <button type="submit" class="btn btn-success">
                Finalize Event
              </button>
            </form>
          </div>
        </div>

        <button onclick="toggleSuggestedSuppliers({{ event.id }})" class="btn btn-primary mb-3"> Recommendations To Add To Your Event </button>
        <button onclick="toggleAlgoSuppliers({{ event.id }})" class="btn btn-primary mb-3"> Suppliers Chosen By Algorithm </button>

        <!-- Suppliers Section -->
        <div class="row">
          {% if event.event_type == 'Birthday' %}
          <div id="SuggestedSuppliers{{ event.id }}" style="display: none">
            <h3 class="text-dark" style="text-align: center; font-weight: bold;">Suggested Suppliers To Add For Birthdays</h3>
              <div class="row">
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card shadow-sm">
                    <div class="card-body">
                      <h5 class="card-title text-info">Birthday Cake</h5>
                      <h5 class="card-title">Bubu Bake</h5>
                        <p class="card-text">Rating: 5</h5>
                        <p class="card-text">Price: ₱4000</h5>
                      <button class="btn btn-success" onClick="addSupplierToEvent('{{ event.id }}', 'Bubu Bake')">Add to Event
                      </button>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card shadow-sm">
                    <div class="card-body">
                      <h5 class="card-title text-info">Photobooth For Kids</h5>
                      <h5 class="card-title">Daveonwork Design & Prints ddp</h5>
                        <p class="card-text">Rating: 5</h5>
                        <p class="card-text">Price: ₱2500</h5>
                      <button class="btn btn-success" onClick="addSupplierToEvent('{{ event.id }}', 'Daveonwork Design & Prints ddp')">Add to Event
                      </button>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card shadow-sm">
                    <div class="card-body">
                      <h5 class="card-title text-info">Catering Service For Guests</h5>
                      <h5 class="card-title">Oliver Castillo</h5>
                        <p class="card-text">Rating: 5</h5>
                        <p class="card-text">Price: ₱50000</h5>
                      <button class="btn btn-success" onClick="addSupplierToEvent('{{ event.id }}', 'Oliver Castillo')">Add to Event
                      </button>
                    </div>
                  </div>
                </div>
              </div>
          </div>
          {% endif %}

          {% if event.event_type == 'Wedding' %}
          <div id="SuggestedSuppliers{{ event.id }}" style="display: none">
            <h3 class="text-dark" style="text-align: center; font-weight: bold;">Suggested Suppliers To Add For Birthdays</h3>
              <div class="row">
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card shadow-sm">
                    <div class="card-body">
                      <h5 class="card-title text-info">Wedding Cakes</h5>
                      <h5 class="card-title">Nica Aganon</h5>
                        <p class="card-text">Rating: 5</h5>
                        <p class="card-text">Price: ₱3400</h5>
                      <button class="btn btn-success" onClick="addSupplierToEvent('{{ event.id }}', 'Nica Aganon')">Add to Event
                      </button>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card shadow-sm">
                    <div class="card-body">
                      <h5 class="card-title text-info">Wedding Photographer</h5>
                      <h5 class="card-title">Santino Juanatas</h5>
                        <p class="card-text">Rating: 5</h5>
                        <p class="card-text">Price: ₱9000</h5>
                      <button class="btn btn-success" onClick="addSupplierToEvent('{{ event.id }}', 'Santino Juanatas')">Add to Event
                      </button>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card shadow-sm">
                    <div class="card-body">
                      <h5 class="card-title text-info">Catering Service For Wedding Guests</h5>
                      <h5 class="card-title">Fortaleza Catering Services</h5>
                        <p class="card-text">Rating: 3</h5>
                        <p class="card-text">Price: ₱35000</h5>
                      <button class="btn btn-success" onClick="addSupplierToEvent('{{ event.id }}', 'Fortaleza Catering Services')">Add to Event
                      </button>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-4 mb-4">
                  <div class="card shadow-sm">
                    <div class="card-body">
                      <h5 class="card-title text-info">Church Wedding Area</h5>
                      <h5 class="card-title">Our Lady of Sorrows CAPAS</h5>
                        <p class="card-text">Rating: 5</h5>
                        <p class="card-text">Price: ₱12000</h5>
                      <button class="btn btn-success" onClick="addSupplierToEvent('{{ event.id }}', 'Our Lady of Sorrows CAPAS')">Add to Event
                      </button>
                    </div>
                  </div>
                </div>
              </div>
          </div>
          {% endif %}

          {% if event.event_type == 'Baptismal' %}
          <div id="SuggestedSuppliers{{ event.id }}" style="display: none">
            <h3 class="text-dark" style="text-align: center; font-weight: bold;">Suggested Suppliers To Add For Birthdays</h3>
            <div class="row">
              <div class="col-md-6 col-lg-4 mb-4">
                <div class="card shadow-sm">
                  <div class="card-body">
                    <h5 class="card-title text-info">Church For Baptisms</h5>
                    <h5 class="card-title">Our Lady of Sorrows CAPAS</h5>
                      <p class="card-text">Rating: 5</h5>
                      <p class="card-text">Price: ₱5000</h5>
                    <button class="btn btn-success" onClick="addSupplierToEvent('{{ event.id }}', 'Our Lady of Sorrows CAPAS')">Add to Event
                    </button>
                  </div>
                </div>
              </div>
              <div class="col-md-6 col-lg-4 mb-4">
                <div class="card shadow-sm">
                  <div class="card-body">
                    <h5 class="card-title text-info">Photographer</h5>
                    <h5 class="card-title">Josh Vergara</h5>
                      <p class="card-text">Rating: 5</h5>
                      <p class="card-text">Price: ₱8000</h5>
                    <button class="btn btn-success" onClick="addSupplierToEvent('{{ event.id }}', 'Josh Vergara')">Add to Event
                    </button>
                  </div>
                </div>
              </div>
              <div class="col-md-6 col-lg-4 mb-4">
                <div class="card shadow-sm">
                  <div class="card-body">
                    <h5 class="card-title text-info">Commemarative Photo Printer</h5>
                    <h5 class="card-title">Brenda Lee Dc Guevarra</h5>
                      <p class="card-text">Rating: 5</h5>
                      <p class="card-text">Price: ₱4000</h5>
                    <button class="btn btn-success" onClick="addSupplierToEvent('{{ event.id }}', 'Brenda Lee Dc Guevarra')">Add to Event
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endif %}
          <!-- Add the extra recommendations here -->
          <div id="AlgoSuppliers{{ event.id }}" style="display: none">

          <h3 class="text-dark" style="text-align: center; font-weight: bold;">Algorithm Selected Event Suppliers</h3>
          <div class="row">

            <!-- Cake Suppliers -->
            {% if event.cake_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Cakes</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.cake_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            <!-- Digital Printers Suppliers -->
            {% if event.digital_printing_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Digital Printers</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.digital_printing_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            {% if event.event_planner_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Event Planner</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.event_planner_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            {% if event.grazing_table_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Grazing Table</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.grazing_table_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            {% if event.makeup_and_hair_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Makeup And Hair</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.makeup_and_hair_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            {% if event.photobooth_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Photobooths</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.photobooth_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            {% if event.photographer_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Photographers</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.photographer_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            {% if event.catering_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Catering Services</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.catering_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            {% if event.church_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Churches</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.church_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            {% if event.event_stylist_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Event Stylists</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.event_stylist_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            {% if event.events_place_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Event Places</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.events_place_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}

            {% if event.lights_and_sounds_thing %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title text-info">Lights And Sounds</h5>
                  <ul class="list-unstyled">
                    {% for supplier in event.lights_and_sounds_thing %}
                    <li class="d-flex justify-content-between align-items-center mb-2">
                      <span>{{ supplier.name }} - Rating: {{ supplier.rating }} | Price: ₱{{ supplier.price }}</span>
                      <div>
                        <button
                          class="btn btn-danger me-2"
                          onClick="deleteSupplier('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Delete
                        </button>
                        <form action="/rate_supplier" method="post" class="d-inline">
                          <input type="hidden" name="supplier_name" value="{{ supplier.name }}" />
                          <button type="submit" class="btn btn-info">
                            View Ratings
                          </button>
                        </form>
                      </div>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}
            </div>
          </div>

          <!-- Add more supplier types here if needed -->
        </div>

        <!-- Add More Suppliers Section -->
        <div class="row my-4">
          <div class="col">
            <div class="add-suppliers-section p-3 rounded bg-light border">
              <h4 class="text-dark">Add More Suppliers to Event</h4>
              <button
                onclick="toggleEventDetails({{ event.id }})"
                class="btn btn-primary mb-3"
              >
                View Suppliers
              </button>

              <div
                id="event_details_holder_{{ event.id }}"
                style="display: none"
              >
                <div class="dropdown mb-4">
                  <button
                    class="btn btn-secondary dropdown-toggle"
                    type="button"
                    id="sortDropdown"
                    data-bs-toggle="dropdown"
                  >
                    Select Supplier Type
                  </button>
                  <div
                    class="dropdown-menu"
                    aria-labelledby="sortDropdown"
                    data-event-id="{{ event.id }}"
                  >
                    <a class="dropdown-item" data-type="all">Show All</a>
                    <a class="dropdown-item" data-type="cake">Cakes</a>
                    <a class="dropdown-item" data-type="digital_printing">Digital Printers</a>
                    <a class="dropdown-item" data-type="event_planner">Event Planners</a>
                    <a class="dropdown-item" data-type="grazing_table">Grazing Table</a>
                    <a class="dropdown-item" data-type="makeup_and_hair">Makeup And Hair Stylists</a>
                    <a class="dropdown-item" data-type="photobooth">Photobooths</a>
                    <a class="dropdown-item" data-type="photographer">Photographers</a>
                    <a class="dropdown-item" data-type="catering">Catering Service</a>
                    <a class="dropdown-item" data-type="church">Churches</a>
                    <a class="dropdown-item" data-type="event_stylist">Event Stylists</a>
                    <a class="dropdown-item" data-type="event_place">Event Places</a>
                    <a class="dropdown-item" data-type="lights_and_sounds">Lights and Sounds</a>
                    <!-- Add other supplier types here -->
                  </div>
                </div>

                <div id="suppliersContainer_{{ event.id }}" class="row">
                  {% for supplier in cake1 %}
                  <div class="supplier col-md-4 mb-4" data-type="cake">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  {% for supplier in digital_printing1 %}
                  <div class="supplier col-md-4 mb-4" data-type="digital_printing">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  {% for supplier in event_planner1 %}
                  <div class="supplier col-md-4 mb-4" data-type="event_planner">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  {% for supplier in grazing_table1 %}
                  <div class="supplier col-md-4 mb-4" data-type="grazing_table">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  {% for supplier in makeup_and_hair1 %}
                  <div class="supplier col-md-4 mb-4" data-type="makeup_and_hair">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  {% for supplier in photobooth1 %}
                  <div class="supplier col-md-4 mb-4" data-type="photobooth">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  {% for supplier in photographer1 %}
                  <div class="supplier col-md-4 mb-4" data-type="photographer">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  {% for supplier in catering1 %}
                  <div class="supplier col-md-4 mb-4" data-type="catering">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  {% for supplier in church1 %}
                  <div class="supplier col-md-4 mb-4" data-type="church">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  {% for supplier in event_stylist1 %}
                  <div class="supplier col-md-4 mb-4" data-type="event_stylist">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}

                  {% for supplier in events_place1 %}
                  <div class="supplier col-md-4 mb-4" data-type="event_place">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                  
                  {% for supplier in lights_and_sounds1 %}
                  <div class="supplier col-md-4 mb-4" data-type="lights_and_sounds">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ supplier.name }}</h5>
                        <p class="card-text">Rating: {{ supplier.rating }}</h5>
                        <p class="card-text">Price: ₱{{ supplier.price }}</h5>
                        <button
                          class="btn btn-success"
                          onClick="addSupplierToEvent('{{ event.id }}', '{{ supplier.name }}')"
                        >
                          Add to Event
                        </button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Delete Event Button -->
        <div class="row mt-3">
          <div class="col text-center">
            <button
              type="button"
              class="btn btn-danger"
              onClick="deleteEvent({{ event.id }})"
            >
              Delete Event
            </button>
            <br />
            <br />
            <br />
          </div>
        </div>
      </div>
    </div>
  </main>
  {% endfor %}
</div>
{% endblock %} {% block javascript %}
<script>
  function toggleEventDetails(eventId) {
    const detailsHolder = document.getElementById(
      `event_details_holder_${eventId}`
    );
    if (
      detailsHolder.style.display === "none" ||
      !detailsHolder.style.display
    ) {
      detailsHolder.style.display = "block"; // Make visible
    } else {
      detailsHolder.style.display = "none"; // Make invisible
    }
  }

  function toggleSuggestedSuppliers(eventId) {
    const SuggestedSuppliers = document.getElementById(
      `SuggestedSuppliers${eventId}`
    );
    if (
      SuggestedSuppliers.style.display === "none" ||
      !SuggestedSuppliers.style.display
    ) {
      SuggestedSuppliers.style.display = "block"; // Make visible
    } else {
      SuggestedSuppliers.style.display = "none"; // Make invisible
    }
  }

  function toggleAlgoSuppliers(eventId) {
    const AlgoSuppliers = document.getElementById(
      `AlgoSuppliers${eventId}`
    );
    if (
      AlgoSuppliers.style.display === "none" ||
      !AlgoSuppliers.style.display
    ) {
      AlgoSuppliers.style.display = "block"; // Make visible
    } else {
      AlgoSuppliers.style.display = "none"; // Make invisible
    }
  }

  function addSupplierToEvent(eventId, supplierName) {
    fetch(`/add_supplier_to_event/${eventId}/${supplierName}`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.success) {
          alert("Supplier added to event successfully");
          location.reload(); // Reload the page to reflect the changes
        } else {
          alert("Failed to add supplier: " + data.message);
        }
      })
      .catch((error) => {
        console.error("Error:", error);
        alert("Failed to add supplier.");
      });
  }

  function deleteSupplier(eventId, supplierName) {
    if (
      confirm(`Are you sure you want to delete the supplier ${supplierName}?`)
    ) {
      fetch(`/creator_delete_supplier/${eventId}/${supplierName}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
      })
        .then((response) => response.json())
        .then((data) => {
          if (data.success) {
            alert("Supplier deleted successfully");
            location.reload(); // Reload the page to reflect the changes
          } else {
            alert("Failed to delete supplier: " + data.message);
          }
        })
        .catch((error) => {
          console.error("Error:", error);
          alert("Failed to delete supplier.");
        });
    }
  }

  function deleteEvent(eventId) {
    if (confirm("Are you sure you want to delete this event?")) {
      fetch(`/delete_event_created/${eventId}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
      }).then((response) => {
        if (response.ok) {
          alert("Event deleted successfully");
          location.reload();
        } else {
          alert("Failed to delete event");
        }
      });
    }
  }

  document.addEventListener("DOMContentLoaded", function () {
    // Add event listener to dropdown menus
    document.querySelectorAll(".dropdown-menu").forEach((menu) => {
      menu.addEventListener("click", (e) => {
        if (!e.target.classList.contains("dropdown-item")) return;

        const type = e.target.getAttribute("data-type");
        const eventId = menu.getAttribute("data-event-id");
        const container = document.getElementById(
          `suppliersContainer_${eventId}`
        );

        if (!container) return;

        // Show or hide suppliers based on type
        Array.from(container.children).forEach((supplier) => {
          if (type === "all" || supplier.getAttribute("data-type") === type) {
            supplier.style.display = "block";
          } else {
            supplier.style.display = "none";
          }
        });

        // If no suppliers are visible, show a "No suppliers found" message
        const visibleSuppliers = Array.from(container.children).filter(
          (supplier) => supplier.style.display === "block"
        );

        if (visibleSuppliers.length === 0) {
          const noResultsDiv = document.createElement("div");
          noResultsDiv.className = "col-12 text-center";
          noResultsDiv.textContent = "No suppliers found for this type.";
          container.appendChild(noResultsDiv);
        } else {
          // Remove the "No suppliers found" message if it exists
          const noResultsDiv = container.querySelector(".col-12.text-center");
          if (noResultsDiv) {
            noResultsDiv.remove();
          }
        }
      });
    });
  });
</script>
{% endblock %}
